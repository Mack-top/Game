# 设计文档 (Design Document) - 烹饪系统

## 1. 系统概述 (System Overview)

**系统名称**：烹饪系统 (Cooking System)
**目的**：允许玩家将收集到的食材加工成各种料理，作为任务交付物、角色增益或交易品。该系统旨在提供深度和趣味性，而非简单的菜单选择。
**与核心玩法循环的关系**：烹饪是“获取食材”和“送餐交付”之间的关键环节，直接影响任务完成度和玩家收益。

## 2. 核心概念 (Core Concepts)

*   **食谱 (Recipes)**：制作料理的蓝图，包含所需食材、烹饪步骤和产出料理信息。
*   **食材 (Ingredients)**：分为天然食材和合成食材，具有品质等级。
*   **料理 (Dishes)**：烹饪系统的产出，具有品质、效果和外观。
*   **烹饪设备 (Cooking Equipment)**：玩家厨房中的各种工具，可升级以解锁更高级功能或提高效率。
*   **烹饪技能 (Cooking Skill)**：玩家的角色技能，影响烹饪成功率、料理品质和可制作食谱范围。

## 3. 用户流程 (User Flow)

1.  **进入厨房**：玩家在安全屋或特定地点进入烹饪界面。
2.  **选择食谱**：玩家浏览已解锁的食谱列表，选择想要制作的料理。
3.  **检查食材**：系统显示所选食谱所需食材及玩家当前拥有的食材数量和品质。
    *   如果食材不足，提示玩家。
    *   如果食材品质不佳，提示可能影响最终料理品质。
4.  **开始烹饪**：确认食材后，进入烹饪小游戏界面。
5.  **烹饪小游戏**：玩家根据屏幕提示进行操作（详见4.1 烹饪小游戏）。
6.  **结果判定**：根据小游戏表现、玩家烹饪技能和食材品质，判定料理的最终品质（例如：完美、良好、普通、失败）。
7.  **料理产出**：成功制作的料理加入玩家背包，失败则损失部分食材。
8.  **退出厨房**：玩家可选择继续烹饪或退出。

## 4. 详细设计 (Detailed Design)

### 4.1 烹饪小游戏 (Cooking Minigame)

为了增加烹饪的互动性和挑战性，引入多种小游戏机制，模拟不同的烹饪步骤。

**示例小游戏类型**：

*   **节奏切割 (Rhythm Slicing)**：
    *   **描述**：屏幕上出现食材，玩家需在特定节奏点按下按钮进行切割。
    *   **成功判定**：按键时机越接近完美，切割越精准，影响食材处理品质。
    *   **设备影响**：刀具升级可扩大完美判定范围。
*   **温度控制 (Temperature Control)**：
    *   **描述**：模拟煎炒或烘烤，屏幕显示温度计，玩家需通过按住/松开按钮将指针维持在绿色区域。
    *   **成功判定**：维持在绿色区域的时间越长，温度控制越好。
    *   **设备影响**：炉灶升级可使温度变化更平稳。
*   **调味配比 (Seasoning Proportion)**：
    *   **描述**：屏幕显示调味料槽，玩家需在限定时间内，通过滑动或点击，将多种调味料填充到指定比例。
    *   **成功判定**：比例越接近目标，调味越完美。
    *   **技能影响**：烹饪技能高可提供更精确的刻度提示。
*   **混合搅拌 (Mixing/Stirring)**：
    *   **描述**：玩家需按照屏幕指示的方向和速度旋转摇杆或鼠标，模拟搅拌。
    *   **成功判定**：速度和方向的准确性影响混合均匀度。
    *   **设备影响**：搅拌机升级可减少操作难度。

**小游戏流程**：
一个食谱可能包含2-4个不同类型的小游戏步骤。每个步骤的成功与否会累积，最终影响料理的整体品质。

### 4.2 料理品质与效果 (Dish Quality & Effects)

*   **品质等级**：
    *   **完美 (Masterpiece)**：最高品质，获得最大报酬，可能解锁隐藏剧情或特殊增益。
    *   **良好 (Good)**：高品质，获得正常报酬，提供标准增益。
    *   **普通 (Average)**：一般品质，报酬略低，增益效果减弱。
    *   **失败 (Failed)**：最低品质，报酬极低或无，可能产生负面效果（如中毒）。
*   **料理效果**：
    *   **任务交付**：满足订单需求。
    *   **角色增益 (Buffs)**：食用后提供临时属性加成（如：增加潜行能力、提高黑客速度、恢复生命/耐力）。
    *   **声望影响**：完美品质的料理交付可显著提升客户声望。
    *   **特殊效果**：部分稀有料理可能提供独特效果，如：短时间透视、吸引特定NPC等。

### 4.3 厨房升级与定制 (Kitchen Upgrade & Customization)

玩家的厨房是烹饪系统的核心场所，可以进行升级和定制。

*   **设备升级**：
    *   **炉灶**：提高温度控制稳定性，解锁高级烹饪方法。
    *   **刀具套装**：提高切割精准度，减少小游戏难度。
    *   **冰箱/储藏柜**：增加食材存储容量，保持食材新鲜度。
    *   **义体厨师助手**：自动化部分简单烹饪步骤，或提供烹饪提示。
*   **外观定制**：玩家可购买或解锁不同的厨房装饰品、灯光效果，打造个性化烹饪空间。

## 5. 交互设计 (Interaction Design)

*   **UI布局**：
    *   左侧：食谱列表（可筛选、排序）。
    *   中间：食谱详情（所需食材、步骤预览、产出料理预览）。
    *   右侧：玩家背包中的食材列表。
    *   底部：烹饪按钮、厨房升级入口。
*   **小游戏UI**：简洁明了，突出操作区域和反馈信息（如进度条、完美区域提示）。
*   **反馈**：
    *   视觉反馈：烹饪过程中食材和料理模型动态变化，特效提示成功/失败。
    *   听觉反馈：烹饪音效（切菜声、煎炒声）、小游戏音效、成功/失败提示音。
    *   文字提示：清晰的指令和结果反馈。

## 6. 技术实现考量 (Technical Implementation Considerations)

*   **数据结构**：
    *   食谱数据：JSON或XML格式，包含ID、名称、描述、所需食材列表（ID、数量、最低品质）、烹饪步骤列表（小游戏类型、参数）、产出料理ID、基础品质。
    *   食材数据：ID、名称、描述、类型（天然/合成）、基础品质、模型路径。
    *   料理数据：ID、名称、描述、模型路径、品质等级、效果列表。
*   **小游戏模块化**：每个小游戏设计为独立模块，方便扩展和维护。
*   **品质计算**：基于小游戏表现分数、玩家烹饪技能等级、食材品质进行加权计算，得出最终料理品质。
*   **性能优化**：确保烹饪界面和小游戏流畅运行，避免卡顿。
*   **本地化**：所有文本（食谱名称、描述、食材名称、提示信息）均需支持多语言。